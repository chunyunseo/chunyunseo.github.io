---
layout: post
title: CPP03 - 베이스3
categories: [Today i learn]
tags: [CPP, TIL]
description: 연산자 오버로딩 등 클래스 관련 문법들과 객체지향 원칙.
---

# 1. protected/private 상속

- protected 상속은 protected보다 넓은 범위의 멤버들을 protected로 변경해서 상속한다.
- private 상속은 private보다 넓은 범위의 멤버들을 private로 변경시켜서 상속한다.

```cpp
class B : protected A
{

};
```



# 2. 객체지향 원칙

1. SRP(단일 책임 원칙): 모든 클래스는 단 하나의 책임을 져야한다. 어떤 클래스를 변경하는 이유는 하나여야 한다.
2. OCP(개방-폐쇄 원칙): 모든 소프트웨어는 확장에는 개방하고, 수정에는 폐쇄되어있어야 한다.
3. LSP(리스코프 치환원칙)
   - 자식 클래스는 언제나 부모 클래스를 교체 가능해야한다. 
   - 자식 클래스는 부모클래스가 약속한 규약을 지켜야한다. 
   - 가족이 아닌 객체를 비슷한 일을 하는 것을 보고 묶거나 파생 타입에 전혀 부모 형제와 동떨어진 능력을 부여해서는 안된다. 
   - OCP를 유발치 않도록 인도하는 원칙이기도 함.
   - 속성을 확장해야지 부모 클래스가 휘둘릴 정도로 강한 속성이 자식 클래스에 추가되서는 안 됨.
   - 부모 클래스의 인터페이스로 뺄 수 없을 만큼의 강한 성격이 추가되서는 안된다.
4. DIP(의존성 역전 법칙)
   - 상위 클래스가 하위 클래스에 의존하면 안 된다.
   - 자식 클래스의 변경이 상위 클래스의 변경을 요구할 시 위반된다.
   - 상위 클래스와 하위 클래스는 추상화 된 상위클래스에 의존해야한다.
5. ISP(인터페이스 분리 원칙)
   - 인터페이스를 작게 나눈다.
   - 클라이언트에서 사용 않는 메서드는 사용하지 말아야 한다.
   - 서로 다른 성격의 인터페이스를 명확히 분리한다.
   - 하나의 인터페이스보다 여러 구체적인 것이 좋다.

# 3. 상속

- IS-A 관계: 무선전화기와 전화기 관계
- HAS-A관계: 경찰과 총의 관계

-----

- 부모형 포인터는 자식 포인터도 가리킬 수 있다.
- 오버라이딩 하면 부모 포인터의 함수가 가려진다.
- 실제 가리키는 객체 자료형이 아닌 포인터의 자료형을 기준으로 컴파일 되기 때문에 컴파일 에러가 날수도 있다.



# 4. Virtual

- 가상함수 virtual
  - 호출 시, 포인터 자료형이 아닌 실제 객체를 참조하여 대상을 정한다.

```cpp
class A
{
public:
	virtual void func1()
	{
		cout << "This is A" << endl;
	}
};

class B : public A
{
public:
	void func1() override
	{
		cout << "This is B" << endl;
	}
    //override 키워드는 생략이 가능함.
};

int main()
{
	A *a = new B();
	a->func1(); //"This is B"
    //virtual 키워드가 없으면 This is A가 출력된다.
	system("pause");
}
```

- virtual int func() const = 0;
  - 순수 가상함수(몸체가 없음). 
  - 객체를 생성할 시 오류를 일으킨다. 
  - 하나 이상의 멤버함수를 순수 가상함수로 선언한 클래스를 abstract class라고 한다.
  - 소멸자나 참조자를 가상으로 선언해야한다.

# 5. 연산자 오버로딩

- pos1 + pos2; -> pos1.operator+(pos2); opertor+(pos1, pos2);
- ++pos; -> pos.operator++(); pos.opertaor(pos);
- operator=()
  - 대입 연산자가 없으면 디폴트 대입연산자가 들어가며 이는 얕은 복사가 발생하므로 메모리 누수에 주의해야한다.
  - 유도 클래스에서 기초 클래스의 대입 연산을 하지 않으면 복사에서 제외된다.
  - const 선언 유무도 오버로딩의 조건이다.

- [], ()도 operator 함수로 쓸 수 있다.

